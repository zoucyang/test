<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.zcy.rescue.passenger.dao.ChartInfoMapper">
	<resultMap id="ChartInfoResultMap" type="com.zcy.rescue.passenger.dto.ChartInfoDto"  >
        <result column="id" property="id"/>
        <result column="role_type" property="roleType"/>
        <result column="union_id" property="unionId"/>
        <result column="app_id" property="appId"/>
        <result column="open_id" property="openId"/>
        <result column="phone" property="phone"/>
        <result column="nike_name" property="nikeName"/>
        <result column="acatar_url" property="acatarUrl"/>
        <result column="enabled" property="enabled"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
	</resultMap>

	<sql id="columns">
		id,
		role_type,
		union_id,
		app_id,
		open_id,
		phone,
		nike_name,
		acatar_url,
		enabled,
		create_time,
		update_time
	</sql>

	<select id="getByPrimaryKey" parameterType="com.zcy.rescue.passenger.entity.ChartInfo" resultMap="ChartInfoResultMap">
      select
      <include refid="columns" />
      from  tbl_chart_info
      where  
	        id = #{id} 
    </select>

    <update id="deleteToUpdate" parameterType="com.zcy.rescue.passenger.vo.ChartInfoVO">
      update  tbl_chart_info set delete_flag=1,update_id =#{updateId},update_name =#{updateName},update_time =#{updateTime} 
      where   id in 
		<foreach item="item" collection="idList" separator="," open="(" close=")" index="index"> 
			#{item}
		</foreach>
    </update>
	
    <update id="updateBatchStatus" parameterType="com.zcy.rescue.passenger.vo.ChartInfoVO">
      update  tbl_chart_info set status=#{status},update_id =#{updateId},update_name =#{updateName},update_time =#{updateTime} 
      where   id in 
		<foreach item="item" collection="idList" separator="," open="(" close=")" index="index"> 
			#{item}
		</foreach>
    </update>

	<insert id="insertBatch" parameterType="java.util.List">
		insert into  tbl_chart_info (
        	id,
        	role_type,
        	union_id,
        	app_id,
        	open_id,
        	phone,
        	nike_name,
        	acatar_url,
        	enabled,
        	create_time,
        	update_time
		) values
		<foreach collection="list" item="p" index="index" separator=",">
			(
        	#{p.id} ,
        	#{p.roleType} ,
        	#{p.unionId} ,
        	#{p.appId} ,
        	#{p.openId} ,
        	#{p.phone} ,
        	#{p.nikeName} ,
        	#{p.acatarUrl} ,
        	#{p.enabled} ,
        	#{p.createTime} ,
        	#{p.updateTime} 
			)
		</foreach>

	</insert>

	<insert id="insertSelective" parameterType="com.zcy.rescue.passenger.entity.ChartInfo">
        insert into  tbl_chart_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
          <if test="id != null">
        	  id,
          </if>
          <if test="roleType != null">
        	  role_type,
          </if>
          <if test="unionId != null">
        	  union_id,
          </if>
          <if test="appId != null">
        	  app_id,
          </if>
          <if test="openId != null">
        	  open_id,
          </if>
          <if test="phone != null">
        	  phone,
          </if>
          <if test="nikeName != null">
        	  nike_name,
          </if>
          <if test="acatarUrl != null">
        	  acatar_url,
          </if>
          <if test="enabled != null">
        	  enabled,
          </if>
          <if test="createTime != null">
        	  create_time,
          </if>
          <if test="updateTime != null">
        	  update_time,
          </if>
        </trim>
         values
        <trim prefix="(" suffix=")" suffixOverrides=",">
          <if test="id != null">
        	  #{id},
          </if>
          <if test="roleType != null">
        	  #{roleType},
          </if>
          <if test="unionId != null">
        	  #{unionId},
          </if>
          <if test="appId != null">
        	  #{appId},
          </if>
          <if test="openId != null">
        	  #{openId},
          </if>
          <if test="phone != null">
        	  #{phone},
          </if>
          <if test="nikeName != null">
        	  #{nikeName},
          </if>
          <if test="acatarUrl != null">
        	  #{acatarUrl},
          </if>
          <if test="enabled != null">
        	  #{enabled},
          </if>
          <if test="createTime != null">
        	  #{createTime},
          </if>
          <if test="updateTime != null">
        	  #{updateTime},
          </if>
        </trim>
	</insert>

	<update id="updateByPrimaryKeySelective" parameterType="com.zcy.rescue.passenger.entity.ChartInfo">
	  update  tbl_chart_info
	  <set>
            <if test="id != null">
        	  id = #{id},
            </if>
            <if test="roleType != null">
        	  role_type = #{roleType},
            </if>
            <if test="unionId != null">
        	  union_id = #{unionId},
            </if>
            <if test="appId != null">
        	  app_id = #{appId},
            </if>
            <if test="openId != null">
        	  open_id = #{openId},
            </if>
            <if test="phone != null">
        	  phone = #{phone},
            </if>
            <if test="nikeName != null">
        	  nike_name = #{nikeName},
            </if>
            <if test="acatarUrl != null">
        	  acatar_url = #{acatarUrl},
            </if>
            <if test="enabled != null">
        	  enabled = #{enabled},
            </if>
            <if test="createTime != null">
        	  create_time = #{createTime},
            </if>
            <if test="updateTime != null">
        	  update_time = #{updateTime},
            </if>
	  </set>
	  where  
	        id = #{id} 
	</update>

	<select id="getList" resultMap="ChartInfoResultMap"
  			parameterType="com.zcy.rescue.passenger.vo.ChartInfoVO">
  	  select
  	  <include refid="columns" />
  	  from  tbl_chart_info
  	  <include refid="QueryBean_Where" />
  	  order by
        <trim prefixOverrides=","> 
            ,tbl_chart_info.create_time  desc
        </trim>
	</select>

	<select id="getPage" resultMap="ChartInfoResultMap"
  			parameterType="com.zcy.rescue.passenger.vo.ChartInfoVO">
  	  select
  	  <include refid="columns" />
  	  from  tbl_chart_info
  	  <include refid="QueryBean_Where" />
  	  order by
        <trim prefixOverrides=","> 
            ,create_time  desc
        </trim>
  	  limit #{pageStart}, #{pageSize}
	</select>

	<select id="getCount" resultType="java.lang.Integer"
  			parameterType="com.zcy.rescue.passenger.vo.ChartInfoVO">
  	  select count(1) from  tbl_chart_info
  	  <include refid="QueryBean_Where" />
	</select>

	<sql id="QueryBean_Where">
		<where> 
	       <if test="id !=null and id != ''">
				and id = #{id}
		   </if>
	       <if test="roleType !=null and roleType != ''">
				and role_type = #{roleType}
		   </if>
	       <if test="unionId !=null and unionId != ''">
				and union_id = #{unionId}
		   </if>
	       <if test="appId !=null and appId != ''">
				and app_id = #{appId}
		   </if>
	       <if test="openId !=null and openId != ''">
				and open_id = #{openId}
		   </if>
	       <if test="phone !=null and phone != ''">
				and phone = #{phone}
		   </if>
	       <if test="nikeName !=null and nikeName != ''">
				and nike_name = #{nikeName}
		   </if>
	       <if test="acatarUrl !=null and acatarUrl != ''">
				and acatar_url = #{acatarUrl}
		   </if>
	       <if test="enabled !=null and enabled != ''">
				and enabled = #{enabled}
		   </if>
	       <if test="createTime !=null and createTime != ''">
				and create_time = #{createTime}
		   </if>
	       <if test="updateTime !=null and updateTime != ''">
				and update_time = #{updateTime}
		   </if>
	       
			<if test="statusList != null and statusList.size > 0">
				and status in
				<foreach item="item" collection="statusList" separator="," open="(" close=")" index="index">
					#{item}
				</foreach>
			</if>
			<if test="idList != null and idList.size > 0">
				and id in
				<foreach item="item" collection="idList" separator="," open="(" close=")" index="index">
					#{item} 			
				</foreach>
			</if>

			<if test="beginCreateTime != null and beginCreateTime != ''">
				<![CDATA[ and create_time >= #{beginCreateTime}]]>
			</if>
			<if test="endCreateTime != null and endCreateTime != ''">
				<![CDATA[ and create_time <=#{endCreateTime} ]]>
			</if>

			<if test="nameLike != null and nameLike != ''">
				<![CDATA[ and name LIKE CONCAT('%', TRIM(#{nameLike}), '%')]]>
			</if>

			<if test="codeLike != null and codeLike != ''">
				<![CDATA[ and code LIKE CONCAT('%', TRIM(#{codeLike}), '%')]]>
			</if>
		</where>
	</sql>

</mapper>

